{"version":3,"sources":["scripts/views/purchase/index.js","utils/msg.js","utils/axios.js","utils/index.js","scripts/components/head/index.js"],"names":["alert","Purchase","props","onChange","val","setState","count","state","currentPrice","productdetail","id","this","match","params","axios","get","then","res","data","result","userMobile","sessionStorage","mobile","title","search","show","Item","style","marginTop","wrap","extra","width","minWidth","showNumber","min","value","className","toFixed","onClick","text","onPress","console","log","post","totalprice","history","push","Component","People","names","age","hobby","score","baseURL","token","fail","msg","hide","success","defaults","headers","common","interceptors","request","use","config","time","loading","error","offline","Promise","reject","response","code","type","createHashHistory","Head","goBack","mode","icon","color","onLeftClick","handleGoBack","rightContent","key","marginRight"],"mappings":"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","file":"static/js/16.0d790ed5.chunk.js","sourcesContent":["import \"./index.scss\"\r\nimport React, { Component } from 'react';\r\nimport Head from \"~/components/head\"\r\nimport { List, Stepper } from 'antd-mobile';\r\nimport { axios } from \"&\"\r\n\r\nimport { history } from \"&\";\r\n\r\nimport { Modal, Button, WhiteSpace, WingBlank, Toast } from 'antd-mobile';\r\n\r\nconst alert = Modal.alert;\r\n\r\nclass Purchase extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            val: 1,\r\n            currentPrice: \"\",\r\n            productdetail: null,\r\n            count: 1\r\n        };\r\n    }\r\n\r\n\r\n    componentDidMount() {\r\n        const id = this.props.match.params.id\r\n        axios.get(\"/react/getProductdetail\", {\r\n            params: {\r\n                id\r\n            }\r\n        }).then(res => {\r\n            // console.log(res)\r\n            this.setState({\r\n                currentPrice: res.data.result.currentPrice * 1,\r\n                productdetail: res.data.result\r\n            })\r\n        })\r\n    }\r\n\r\n    onChange = (val) => {\r\n        // console.log(val);\r\n        this.setState({\r\n            count: val\r\n        });\r\n    }\r\n\r\n    // handleClick = () => {\r\n    //     //提交订单\r\n    //     axios.post(\"/react/addToOrderList\", {\r\n    //         count: this.state.count,\r\n    //         productdetail: this.state.productdetail,\r\n    //         totalprice: (this.state.currentPrice * 1) * (this.state.count * 1),\r\n    //         id: this.props.match.params.id,\r\n    //         productdetail: this.state.productdetail\r\n    //     }).then(res => {\r\n    //         history.push(\"/main/order\")\r\n    //     })\r\n    // }\r\n\r\n\r\n\r\n    render() {\r\n        const {\r\n            currentPrice,\r\n            count\r\n        } = this.state\r\n        const userMobile = sessionStorage.mobile\r\n        // console.log(userMobile)\r\n        return (\r\n            <div>\r\n                <Head title=\"提交订单\" search={true} show={true}></Head>\r\n                <List.Item\r\n                    style={{ marginTop: 30 }}\r\n                    wrap\r\n                    extra={\r\n                        <Stepper\r\n                            style={{ width: '100%', minWidth: '100px' }}\r\n                            showNumber\r\n                            min={1}\r\n                            value={this.state.count}\r\n                            onChange={this.onChange}\r\n                        />}\r\n                >\r\n                    数量\r\n                    </List.Item>\r\n                <List.Item>小计<p className=\"p-r\" >¥{(currentPrice * count).toFixed(1)}</p></List.Item>\r\n                <List.Item style={{ marginTop: 10 }}>抵用券/优惠码<p className=\"p-r\">暂无可用></p></List.Item>\r\n                <List.Item style={{ marginTop: 16 }}>手机号码<p className=\"p-r\">{userMobile}</p></List.Item>\r\n                <ul className=\"purchaseForm__remark\">\r\n                    <li className=\"purchaseForm__remarkItem\">\r\n                        <i className=\"purchaseForm__sign\" />\r\n                        <span className=\"purchaseForm__desc\">支持随时退</span>\r\n                    </li>\r\n                    <li>\r\n                        <i className=\"purchaseForm__sign\" />\r\n                        <span className=\"purchaseForm__desc\">支持过期退</span>\r\n                    </li>\r\n                </ul>\r\n                <a className=\"purchaseForm__submit\"\r\n                    onClick={() =>\r\n                        alert('下单成功', '您即将前往订单页查看相关订单', [\r\n                            { text: '取消', onPress: () => console.log('cancel') },\r\n                            { text: '确定', onPress: () => {\r\n                                \r\n                                axios.post(\"/react/addToOrderList\", {\r\n                                    count: this.state.count,\r\n                                    productdetail: this.state.productdetail,\r\n                                    totalprice: (this.state.currentPrice * 1) * (this.state.count * 1),\r\n                                    id: this.props.match.params.id,\r\n                                    productdetail: this.state.productdetail\r\n                                }).then(res => {\r\n                                    history.push(\"/main/order\")\r\n                                })\r\n\r\n                            } },\r\n                        ])\r\n                    }\r\n\r\n                >\r\n                    提交订单\r\n                </a>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Purchase;","\r\n\r\n\r\nexport const msg = \"Are you Ok?\";\r\n\r\n\r\n// 构造函数  (构造器 + 原型对象 + 静态对象 )\r\nexport class People{\r\n\r\n    constructor(names,age){\r\n        this.names = names;\r\n        this.age = age;\r\n    }\r\n\r\n    // 原型对象\r\n    say(){\r\n\r\n    }\r\n\r\n    todo(){\r\n\r\n    }\r\n}\r\n\r\nPeople.hobby = [\"eat\",\"sleep\"]\r\n\r\n\r\nexport class Student extends People{\r\n    constructor(names,age,score){\r\n        super(names,age);  // super 当函数时 指向是父类的 构造器 \r\n        this.score = score;\r\n    }\r\n\r\n    goto(){\r\n\r\n    }\r\n\r\n    say(){\r\n        return super.say();   // super 当做对象时 指向的是父类的 原型对象 \r\n    }\r\n}\r\n\r\n\r\nStudent.hobby = [\"read\",\"music\"];\r\n\r\n\r\nexport class Component{\r\n    constructor(){\r\n\r\n    }\r\n\r\n    render(){\r\n\r\n    }\r\n\r\n    componentWillMount(){\r\n\r\n    }\r\n}\r\n\r\nexport class App extends Component{\r\n    \r\n}\r\n","\r\n\r\nimport axios from \"axios\";\r\nimport { Toast } from \"antd-mobile\"\r\nimport { history } from \"&\"\r\nconst baseURL = 'http://47.105.60.69:1000/'\r\nlet token = \"\";\r\naxios.defaults.baseURL = baseURL;\r\naxios.defaults.headers.common['token'] = token;   // req.headers.token \r\naxios.defaults.headers.post['Content-Type'] = 'application/x-www-form-urlencoded';\r\n\r\n\r\nexport function loadingToast(msg, time) {\r\n    msg = msg || \"请求中...\";\r\n    time = time || 1;\r\n    Toast.hide();\r\n    Toast.loading(msg, time, () => {\r\n        console.log('Load complete !!!');\r\n    });\r\n}\r\n\r\nexport function fail(msg) {\r\n    Toast.hide();\r\n    Toast.fail(msg, 1);\r\n}\r\n\r\nexport function offline(msg) {\r\n    Toast.hide();\r\n    Toast.offline(msg, 1);\r\n}\r\n\r\nexport function success(msg) {\r\n    Toast.hide()\r\n    Toast.success(msg, 1);\r\n}\r\n// axios  拦截器  Interceptors\r\n// request 请求发送之前的拦截器\r\naxios.interceptors.request.use(function (config) {\r\n    // 配置动画\r\n    loadingToast();\r\n    token = sessionStorage.token ? sessionStorage.token : \"\";\r\n    config.headers['token'] = token;\r\n    return config;\r\n}, function (error) {\r\n    // 请求失败错误提示 \r\n    offline(\"请求失败-网络异常\");\r\n    return Promise.reject(error);\r\n});\r\n\r\n\r\n\r\n// response 响应 完成 的拦截器\r\naxios.interceptors.response.use(function (response) {\r\n\r\n    console.log(response)\r\n    if (response.data.code == \"3000\") {\r\n        // 跳转 登录 \r\n        history.push(\"/login\");\r\n    }\r\n    // type  不存在    success\r\n    // type = 0  fail\r\n    // type = 1  success \r\n    if (!!response.data.type) {\r\n        success(response.data.msg);\r\n    } else {\r\n        if (response.data.type == 0) {\r\n            fail(response.data.msg)\r\n        } else {\r\n            success(response.data.msg)\r\n        }\r\n    }\r\n\r\n\r\n    // 成功的响应\r\n    return response;\r\n}, function (error) {\r\n    // 失败的响应 \r\n    fail(\"响应失败-服务器异常\")\r\n    return Promise.reject(error);\r\n});\r\n\r\nexport { axios, baseURL }","import url from \"url\";\r\nimport { createHashHistory } from \"history\";\r\n\r\nexport { msg } from \"./msg\"\r\n\r\nexport { config } from \"./config\"\r\n\r\nexport const commonCss = {\r\n    all: {\r\n        margin: 0,\r\n        padding: 0\r\n    },\r\n    three: {\r\n        backgroundColor: \"pink\",\r\n        boxShadow: \"0 0 0 10px blue\"\r\n    }\r\n}\r\n\r\n\r\nexport const commonJS = {\r\n    move() {\r\n        console.log(\"这是 鼠标滑动事件\")\r\n    },\r\n    touch() {\r\n        console.log(\"this is touch event 触摸事件 \")\r\n    }\r\n}\r\n\r\n\r\nexport { axios, baseURL } from \"./axios\"\r\n\r\n\r\nexport function GetQuery(search) {\r\n\r\n    return url.parse(search, true).query;\r\n    // constructor(search){\r\n    //     this.search = search;\r\n    // }\r\n\r\n}\r\n\r\n\r\n\r\n// history = this.props.history \r\nexport const history = new createHashHistory();","import \"./index.scss\";\r\nimport React, { Component } from \"react\"\r\nimport {\r\n    NavBar,\r\n    Icon\r\n} from \"antd-mobile\"\r\n\r\nimport { history } from \"&\"\r\n\r\nexport default class Head extends Component {\r\n\r\n    handleGoBack(show) {             //这里没有写箭头函数,在下面可以用bind来改变this指向\r\n        if (show) {\r\n            history.goBack();\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const {\r\n            title,\r\n            show,\r\n            search\r\n        } = this.props;\r\n        return (\r\n            <NavBar\r\n                mode=\"light\"\r\n                icon={show && <Icon type=\"left\" />}\r\n                style={{ color: '#333' }}\r\n                onLeftClick={() => this.handleGoBack(show)}\r\n                rightContent={[\r\n                    !search && <Icon key=\"0\" type=\"search\" style={{ marginRight: '16px' }} />\r\n                ]}\r\n            >{title}</NavBar>\r\n        )\r\n    }\r\n}"],"sourceRoot":""}