{"version":3,"sources":["scripts/views/login/index.js","utils/msg.js","utils/axios.js","utils/index.js","scripts/components/head/index.js"],"names":["mReg","cReg","timer","Login","props","handleCheckMobile","mobile","code","state","value","toggle","setState","codeFlag","test","loginFlag","handleCheckCode","console","log","start","count","txt","clearInterval","computedTime","setInterval","handleSendCode","axios","post","then","res","handleSumbit","data","type","sessionStorage","token","history","push","this","title","show","search","placeholder","clear","ref","el","onChange","className","inline","size","style","backgroundColor","disabled","onClick","borderColor","marginTop","marginBottom","color","borderRadius","letterSpacing","fontSize","marginLeft","marginRight","height","lineHeight","textDecoration","textAlign","Component","People","names","age","hobby","score","baseURL","fail","msg","hide","success","defaults","headers","common","interceptors","request","use","config","time","loading","error","offline","Promise","reject","response","createHashHistory","Head","goBack","mode","icon","onLeftClick","handleGoBack","rightContent","key"],"mappings":"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","file":"static/js/15.98103f30.chunk.js","sourcesContent":["import \"./index.scss\"\r\nimport React, { Component } from \"react\"\r\nimport {\r\n    Button,\r\n    WhiteSpace,\r\n    List,\r\n    WingBlank,\r\n    InputItem\r\n} from \"antd-mobile\";\r\nimport Head from \"~/components/head\"\r\nimport { axios } from \"&\";\r\n\r\nexport const mReg = /^1(3|4|5|6|7|8|9)\\d{9}$/;\r\nexport const cReg = /^\\d{4}$/\r\n\r\n\r\nlet timer = null;\r\nexport default class Login extends Component {\r\n\r\n    constructor(props) {\r\n        super(props)\r\n        this.state = {\r\n            codeFlag: false,\r\n            loginFlag: false,\r\n            count: 60,\r\n            txt: \"发送验证码\",\r\n            toggle: true\r\n        }\r\n    }\r\n\r\n    handleCheckMobile = (mobile) => {\r\n        // console.log(mobile);\r\n        var code = this.code.state.value;\r\n        if (this.state.toggle) {\r\n            this.setState({\r\n                codeFlag: mReg.test(mobile),\r\n                loginFlag: mReg.test(mobile) && cReg.test(code)\r\n            })\r\n        }\r\n\r\n    }\r\n\r\n    handleCheckCode = (code) => {\r\n        // console.log(code);\r\n        var mobile = this.mobile.state.value\r\n        console.log(mobile)\r\n        this.setState({\r\n            loginFlag: mReg.test(mobile) && cReg.test(code)\r\n        })\r\n    }\r\n\r\n    start = () => {\r\n        if (this.state.count > 1) {\r\n            this.setState({\r\n                count: --this.state.count,\r\n                txt: `剩余 ${this.state.count} S`,\r\n                codeFlag: false,\r\n                toggle: false\r\n            })\r\n        } else {\r\n            clearInterval(timer);\r\n            timer = null;\r\n            this.setState({\r\n                count: 60,\r\n                txt: '发送验证码',\r\n                codeFlag: true,\r\n                toggle: true\r\n            })\r\n        }\r\n    }\r\n\r\n    computedTime = () => {\r\n        this.start();\r\n        timer = setInterval(this.start, 1000);\r\n    }\r\n\r\n    handleSendCode = () => {\r\n        // 发送验证码 \r\n        this.computedTime();\r\n        axios.post(\"/react/aly/sendSms\", {\r\n            mobile: this.mobile.state.value\r\n        }).then(res => {\r\n\r\n        })\r\n    }\r\n\r\n    handleSumbit = () => {\r\n        // 校验验证码 \r\n        axios.post(\"/react/checkCode\", {\r\n            mobile: this.mobile.state.value,\r\n            code: this.code.state.value\r\n        }).then(res => {\r\n            if (!!res.data.type) {\r\n                sessionStorage.token = res.data.token;\r\n                sessionStorage.mobile = this.mobile.state.value;\r\n                this.props.history.push(\"/main/mine\");\r\n                clearInterval(timer);\r\n                timer = null;\r\n            } else {\r\n                sessionStorage.token = \"\";\r\n                sessionStorage.mobile = \"\";\r\n            }\r\n        })\r\n    }\r\n\r\n    render() {\r\n        const {\r\n            codeFlag,\r\n            loginFlag,\r\n            txt\r\n        } = this.state;\r\n        return (\r\n            <div>\r\n                <Head title=\"手机号快捷登录\" show={false} search={true} ></Head>\r\n                <List>\r\n                    <InputItem\r\n                        type=\"tel\"\r\n                        placeholder=\"请输入手机号\"\r\n                        clear\r\n                        ref={el => this.mobile = el}\r\n                        onChange={this.handleCheckMobile}\r\n                    >86<div className=\"EasyLogin_Mobile_Arrow\"></div>\r\n                        <Button\r\n                            type=\"default\"\r\n                            inline\r\n                            className=\"l-btn\"\r\n                            size=\"small\"\r\n                            style={{ backgroundColor: \"#f63\" }}\r\n                            disabled={!codeFlag}\r\n                            onClick={this.handleSendCode}\r\n                        >{txt}\r\n                        </Button>\r\n                    </InputItem>\r\n                    <InputItem\r\n                        type=\"number\"\r\n                        placeholder=\"请输入验证码\"\r\n                        ref={el => this.code = el}\r\n                        onChange={this.handleCheckCode}\r\n                    >验证码</InputItem>\r\n                    <div className=\"form-info\">未注册的手机号码验证后自动创建点评账户</div>\r\n                    <Button\r\n                        type=\"default\"\r\n                        disabled={!loginFlag}\r\n                        onClick={this.handleSumbit}\r\n                        style={{ backgroundColor: \"#f63\", borderColor: \"#f63\", marginTop: 6, marginBottom: 6, color: \"#fff\", borderRadius: 4, letterSpacing: 6, fontSize: 14, marginLeft: 16, marginRight: 16, height: 40, lineHeight: \"40px\" }}\r\n                    >登录</Button>\r\n                    <div className=\"extra login-user\" style={{ textDecoration: 'none', fontSize: 14, textAlign: \"right\", marginRight: 6, height: 10 }}></div>\r\n                </List>\r\n            </div>\r\n        )\r\n    }\r\n\r\n}","\r\n\r\n\r\nexport const msg = \"Are you Ok?\";\r\n\r\n\r\n// 构造函数  (构造器 + 原型对象 + 静态对象 )\r\nexport class People{\r\n\r\n    constructor(names,age){\r\n        this.names = names;\r\n        this.age = age;\r\n    }\r\n\r\n    // 原型对象\r\n    say(){\r\n\r\n    }\r\n\r\n    todo(){\r\n\r\n    }\r\n}\r\n\r\nPeople.hobby = [\"eat\",\"sleep\"]\r\n\r\n\r\nexport class Student extends People{\r\n    constructor(names,age,score){\r\n        super(names,age);  // super 当函数时 指向是父类的 构造器 \r\n        this.score = score;\r\n    }\r\n\r\n    goto(){\r\n\r\n    }\r\n\r\n    say(){\r\n        return super.say();   // super 当做对象时 指向的是父类的 原型对象 \r\n    }\r\n}\r\n\r\n\r\nStudent.hobby = [\"read\",\"music\"];\r\n\r\n\r\nexport class Component{\r\n    constructor(){\r\n\r\n    }\r\n\r\n    render(){\r\n\r\n    }\r\n\r\n    componentWillMount(){\r\n\r\n    }\r\n}\r\n\r\nexport class App extends Component{\r\n    \r\n}\r\n","\r\n\r\nimport axios from \"axios\";\r\nimport { Toast } from \"antd-mobile\"\r\nimport { history } from \"&\"\r\nconst baseURL = 'http://47.105.60.69:1000/'\r\nlet token = \"\";\r\naxios.defaults.baseURL = baseURL;\r\naxios.defaults.headers.common['token'] = token;   // req.headers.token \r\naxios.defaults.headers.post['Content-Type'] = 'application/x-www-form-urlencoded';\r\n\r\n\r\nexport function loadingToast(msg, time) {\r\n    msg = msg || \"请求中...\";\r\n    time = time || 1;\r\n    Toast.hide();\r\n    Toast.loading(msg, time, () => {\r\n        console.log('Load complete !!!');\r\n    });\r\n}\r\n\r\nexport function fail(msg) {\r\n    Toast.hide();\r\n    Toast.fail(msg, 1);\r\n}\r\n\r\nexport function offline(msg) {\r\n    Toast.hide();\r\n    Toast.offline(msg, 1);\r\n}\r\n\r\nexport function success(msg) {\r\n    Toast.hide()\r\n    Toast.success(msg, 1);\r\n}\r\n// axios  拦截器  Interceptors\r\n// request 请求发送之前的拦截器\r\naxios.interceptors.request.use(function (config) {\r\n    // 配置动画\r\n    loadingToast();\r\n    token = sessionStorage.token ? sessionStorage.token : \"\";\r\n    config.headers['token'] = token;\r\n    return config;\r\n}, function (error) {\r\n    // 请求失败错误提示 \r\n    offline(\"请求失败-网络异常\");\r\n    return Promise.reject(error);\r\n});\r\n\r\n\r\n\r\n// response 响应 完成 的拦截器\r\naxios.interceptors.response.use(function (response) {\r\n\r\n    console.log(response)\r\n    if (response.data.code == \"3000\") {\r\n        // 跳转 登录 \r\n        history.push(\"/login\");\r\n    }\r\n    // type  不存在    success\r\n    // type = 0  fail\r\n    // type = 1  success \r\n    if (!!response.data.type) {\r\n        success(response.data.msg);\r\n    } else {\r\n        if (response.data.type == 0) {\r\n            fail(response.data.msg)\r\n        } else {\r\n            success(response.data.msg)\r\n        }\r\n    }\r\n\r\n\r\n    // 成功的响应\r\n    return response;\r\n}, function (error) {\r\n    // 失败的响应 \r\n    fail(\"响应失败-服务器异常\")\r\n    return Promise.reject(error);\r\n});\r\n\r\nexport { axios, baseURL }","import url from \"url\";\r\nimport { createHashHistory } from \"history\";\r\n\r\nexport { msg } from \"./msg\"\r\n\r\nexport { config } from \"./config\"\r\n\r\nexport const commonCss = {\r\n    all: {\r\n        margin: 0,\r\n        padding: 0\r\n    },\r\n    three: {\r\n        backgroundColor: \"pink\",\r\n        boxShadow: \"0 0 0 10px blue\"\r\n    }\r\n}\r\n\r\n\r\nexport const commonJS = {\r\n    move() {\r\n        console.log(\"这是 鼠标滑动事件\")\r\n    },\r\n    touch() {\r\n        console.log(\"this is touch event 触摸事件 \")\r\n    }\r\n}\r\n\r\n\r\nexport { axios, baseURL } from \"./axios\"\r\n\r\n\r\nexport function GetQuery(search) {\r\n\r\n    return url.parse(search, true).query;\r\n    // constructor(search){\r\n    //     this.search = search;\r\n    // }\r\n\r\n}\r\n\r\n\r\n\r\n// history = this.props.history \r\nexport const history = new createHashHistory();","import \"./index.scss\";\r\nimport React, { Component } from \"react\"\r\nimport {\r\n    NavBar,\r\n    Icon\r\n} from \"antd-mobile\"\r\n\r\nimport { history } from \"&\"\r\n\r\nexport default class Head extends Component {\r\n\r\n    handleGoBack(show) {             //这里没有写箭头函数,在下面可以用bind来改变this指向\r\n        if (show) {\r\n            history.goBack();\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const {\r\n            title,\r\n            show,\r\n            search\r\n        } = this.props;\r\n        return (\r\n            <NavBar\r\n                mode=\"light\"\r\n                icon={show && <Icon type=\"left\" />}\r\n                style={{ color: '#333' }}\r\n                onLeftClick={() => this.handleGoBack(show)}\r\n                rightContent={[\r\n                    !search && <Icon key=\"0\" type=\"search\" style={{ marginRight: '16px' }} />\r\n                ]}\r\n            >{title}</NavBar>\r\n        )\r\n    }\r\n}"],"sourceRoot":""}